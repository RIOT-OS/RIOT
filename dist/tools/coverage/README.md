# Coverage

This script allows generating `.gcda` files from the output generated by
the `sys/coverage` module. Thereby allowing generation of coverage
metrics on real hardware.

The code been imported initially from [Zephyr](https://docs.zephyrproject.org/1.14.1/guides/coverage.html).

## Usage

1. Add `USEMODULE += coverage` to your application `Makefile`.
2. Compile and run the application as usual, but save data
   written to the UART in a file (e.g. `make cleanterm | tee /tmp/log.txt`).
3. Generate Gcov `.gcda` files from the log file:
   `./dist/tools/coverage/coverage.py -i /tmp/log.txt`)
4. Use a Gcov Frontend (e.g. [gcovr](https://gcovr.com/en/stable/))
   to generate a visualization from the `.gcda` files:
   `gcovr -r . --gcov-executable ${TRIPLET}-gcov --html -o coverage.html --html-details`

## See also

* https://docs.zephyrproject.org/1.14.1/guides/coverage.html
* https://github.com/zephyrproject-rtos/zephyr/tree/main/subsys/testsuite/coverage
* https://github.com/zephyrproject-rtos/zephyr/blob/main/scripts/gen_gcov_files.py
