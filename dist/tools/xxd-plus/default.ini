-- To avoid colliding with ; and # in C, this INI file uses the nonstandard
-- "--" for comments

[Main]

-- File header. This is placed before any other content.
header= /* This file was automatically generated by xxd-plus.
 \40* !!!! DO NOT EDIT !!!!!
 \40*/

 #include <stdint.h>
 #include "fs/constfs.h"
 \n

-- File footer. This is placed at the end.
-- mount_point: mount point (as given by the command line's "-m" argument)
-- constfs_name: structure name (also provided in the command line)
footer= \nstatic const constfs_t _fs_data = {{
 \40   .files = _files,
 \40   .nfiles = sizeof(_files) / sizeof(_files[0]),
 }};

 vfs_mount_t {constfs_name} = {{
 \40   .fs = &constfs_file_system,
 \40   .mount_point = "{mount_point}",
 \40   .private_data = (void *)&_fs_data,
 }};\n

[Files]

-- These chunks are used once, after all blobs have been printed
header= \nstatic const constfs_file_t _files[] = {\n
footer= };\n

-- between the header and the footer, for each file the following template is
-- executed:
-- target_name: is the target filename (i.e the filename relative to the mount point)
-- target_name_addroot: like target_name but it always starts with a "/".
-- buff_name: the value of {varname} for the Blob corresponding to this file.
template = \40{{
 \40 .path = "{target_name_addroot}",
 \40 .data = {buff_name},
 \40 .size = sizeof({buff_name})
 \40}},\n

[Blob]
-- These chunks are placed at the beginning and end of each "textified"
-- file.
-- fname is the target filename (i.e the filename relative to the mount point)
-- varname is a unique identifiear assigned by the tool to this variable.

header = \n/** {fname} **/
 static const uint8_t {varname}[] = {{\n
footer = };\n
