APPLICATION = driver_lsm303dlhc
include ../Makefile.tests_common

FEATURES_REQUIRED = periph_i2c

USEMODULE += lsm303dlhc
USEMODULE += xtimer

# define parameters for selected boards
ifneq (,$(filter iotlab-m3,$(BOARD)))
  TEST_LSM303DLHC_ACC_PIN ?= GPIO_PIN\(PORT_B,1\)
  TEST_LSM303DLHC_MAG_PIN ?= GPIO_PIN\(PORT_B,2\)
endif

# set default device parameters in case they are undefined
TEST_LSM303DLHC_I2C      ?= I2C_0
TEST_LSM303DLHC_ACC_ADDR ?= 25
TEST_LSM303DLHC_MAG_ADDR ?= 30
TEST_LSM303DLHC_ACC_PIN  ?= GPIO_PIN\(0,0\)
TEST_LSM303DLHC_MAG_PIN  ?= GPIO_PIN\(0,1\)

# export parameters
CFLAGS += -DTEST_LSM303DLHC_I2C=$(TEST_LSM303DLHC_I2C)
CFLAGS += -DTEST_LSM303DLHC_ACC_ADDR=$(TEST_LSM303DLHC_ACC_ADDR)
CFLAGS += -DTEST_LSM303DLHC_MAG_ADDR=$(TEST_LSM303DLHC_MAG_ADDR)
CFLAGS += -DTEST_LSM303DLHC_ACC_PIN=$(TEST_LSM303DLHC_ACC_PIN)
CFLAGS += -DTEST_LSM303DLHC_MAG_PIN=$(TEST_LSM303DLHC_MAG_PIN)

include $(RIOTBASE)/Makefile.include
