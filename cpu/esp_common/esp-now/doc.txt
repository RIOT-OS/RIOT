/*
 * Copyright (C) 2018 Gunar Schorcht
 *
 * This file is subject to the terms and conditions of the GNU Lesser
 * General Public License v2.1. See the file LICENSE in the top level
 * directory for more details.
 */

/**
 * @defgroup    cpu_esp_common_esp_now ESP-NOW Network Interface
 * @ingroup     cpu_esp_common
 * @ingroup     cpu_esp32
 * @ingroup     cpu_esp8266
 * @brief       WiFi based ESP-NOW network device driver
 *
 * @author      Gunar Schorcht <gunar@schorcht.net>

# ESP-NOW network interface {#esp_common_esp_now_network_interface}

This module realizes a netdev interface using Espressif's ESP-NOW technology
which uses the built-in WiFi module.

With ESP-NOW, the ESP MCUs provide a connectionless communication technology,
featuring short packet transmission. It applies the IEEE802.11 Action Vendor
frame technology, along with the IE function developed by Espressif, and CCMP
encryption technology, realizing a secure, connectionless communication
solution.

The RIOT port for ESP MCUs implements with module `esp_now` a `netdev`
driver which uses ESP-NOW to provide a link layer interface to a meshed network
of ESP nodes. In this network, each node can send short packets with up to
250 data bytes to all other nodes that are visible in its range.

@note Module `esp_now` is enabled automatically if the `netdev_default` module
is used and no other interface is defined as default `netdev`. If it is not
enabled as default `netdev`, it can be enabled by using the `esp_now` module
if needed.
<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
USEMODULE += esp_now
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For ESP-NOW, ESP nodes are used in WiFi SoftAP + Station mode to advertise
their SSID and become visible to other ESP nodes. The SSID of an ESP node
is the concatenation of the prefix `RIOT_ESP_` with the MAC address of its
SoftAP WiFi interface. The driver periodically scans all visible ESP nodes.

The following configuration parameters are defined for ESP-NOW nodes.
These parameters can be overridden by application-specific board configurations.

<center>

Parameter               | Default        | Description
:-----------------------|:---------------|:-----------
#ESP_NOW_SCAN_PERIOD_MS | 10000UL        | Scan interval for peer nodes in ms
#ESP_NOW_SOFT_AP_PASS   | "This is RIOT" | Passphrase for the SoftAP interface as clear text [1]
#ESP_NOW_CHANNEL        | 6              | Channel used for ESP-NOW in the 2.4 GHz band [2]
#ESP_NOW_KEY            | ""             | 128-bit key used for encrypted communication [3]
</center><br>

1. The passphrase is used for the SoftAP interface of ESP-NOW nodes. It
   is defined as a string with a maximum of 64 characters and must be the
   same for all nodes in the network.

2. The channel is in the range of 1 to 13. Please note that in some regions
   not all 13 channels may be used for regulatory reasons. Select a channel
   that is allowed in your region.
   If ESP-NOW is used together with an infrastructure WiFi network, the
   channel must be the same as used by the AP of the infrastructure WiFi.

3. The key has to be defined to enable encrypted communication between ESP-NOW
   nodes. The key is 16 bytes long and is defined by a string of 8-bit hex
   values separated by spaces, for example:
   ```
   "0f 1e 2d 3c 4b 5a 69 78 87 96 a5 b4 c3 d2 e1 f0"
   ```
   An empty string for this parameter means that the encryption is not used.
   If less than 16 bytes are defined by the string, the remaining bytes of
   the key are filled with 0.

@note
- If encrypted communication is used, a maximum of 6 nodes can
  communicate with each other, while in unencrypted mode, up to
  20 nodes can communicate.<br>
- The @ref esp_common_esp_now_network_interface (module `esp_now`) and
  the @ref esp_common_wifi_network_interface (module `esp_wifi`) can be used
  simultaneously, for example, to realize a border router for a mesh network
  which uses ESP-NOW.
  In this case the ESP-NOW interface must use the same channel as the AP of the
  infrastructure WiFi network. All ESP-NOW nodes must therefore be compiled with
  the channel of the AP asvalue for the parameter `#ESP_NOW_CHANNEL`.

 */
