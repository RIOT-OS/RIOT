ifneq (,$(filter tinydtls,$(USEPKG)))

  USEMODULE += tinydtls

#Mandatory for tinyDTLS
  CFLAGS += -DDTLSv12 -DWITH_SHA256


# Partially under control of the App's requirements

# The configuration for socket overrides Sock
  ifeq (,$(filter WITH_RIOT_SOCKETS,$(CFLAGS)))
    CFLAGS += -DWITH_RIOT_GNRC
  endif

# NOTE: PSK should be enabled by default BUT if the user define any other cipher
#       suite(s) it should not be enabled.
#IDEA: Create the flag DTLS_CIPHERS with keywords PSK, ECC (and future)
  ifeq (,$(filter -DDTLS_PSK,$(CFLAGS)))
      ifeq (,$(filter -DDTLS_ECC,$(CFLAGS)))
        CFLAGS += -DDTLS_PSK
      endif
  endif

#CFLAGS += -DDTLS_ECC

# TODO: How to handle the tinydtls's syslog level?
# CFLAGS += -DNDEBUG

endif

ifneq (,$(filter tinydtls,$(USEMODULE)))
  USEMODULE += tinydtls_aes
  USEMODULE += tinydtls_ecc
  USEMODULE += tinydtls_sha2

endif
