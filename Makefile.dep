USEMODULE := $(shell GNRC_NETIF_NUMOF=$(GNRC_NETIF_NUMOF) \
	$(RIOTBASE)/scripts/deps.sh $(RIOTBASE)/modules.dep $(USEMODULE))

ifeq (,$(USEMODULE))
$(error Error parsing $(RIOTBASE)/modules.dep. \
	Try rerunning the make command with "TRACE_DEPS=yes make ..." to see \
	Where parsing went wrong.)
endif

# filter PKG_x and FEATURE_y into USEPKG+=x and FEATURES_REQUIRED+=y
USEPKG := $(subst PKG_,,$(filter PKG_%,$(USEMODULE))) $(USEPKG)
FEATURES_REQUIRED := $(subst FEATURE_,,$(filter FEATURE_%,$(USEMODULE))) $(FEATURES_REQUIRED)
USEMODULE := $(filter-out PKG_% FEATURE_%,$(USEMODULE))
